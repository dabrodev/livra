datasource db {
  provider = "postgresql"
}

generator client {
  provider = "prisma-client-js"
}

model Influencer {
  id              String   @id @default(uuid())
  name            String
  country         String
  city            String
  neighborhood    String?
  apartmentStyle  String
  currentBalance  Float    @default(5000)
  personalityVibe String   // e.g., "Minimalist Glam", "Streetwear Rebel"
  isActive        Boolean  @default(false)
  
  // Appearance
  hairColor       String   @default("brown")   // blonde, brunette, red, black, auburn, gray
  hairStyle       String   @default("long")    // long, short, medium, curly, straight, wavy
  eyeColor        String   @default("brown")   // blue, green, brown, hazel, gray
  skinTone        String   @default("medium")  // light, fair, medium, tan, olive, dark
  lipStyle        String   @default("natural") // full, thin, natural
  features        String[] // freckles, glasses, dimples, beauty-mark, etc.
  bodyHeight      String   @default("average") // petite, average, tall
  bodyType        String   @default("slim")    // slim, athletic, curvy, plus-size
  
  // Clothing Style Preferences
  clothingStyle   String   @default("casual") // casual, sporty, elegant, streetwear, bohemian
  bottomwear      String[] // jeans, skirts, shorts, leggings, dresses
  footwear        String[] // sneakers, heels, barefoot, slippers, boots
  signatureItems  String[] // always tights, oversized sweaters, accessories, etc.
  
  // The 14-Slot Asset Management
  faceReferences  String[] // URLs to master face images
  roomReferences  String[] // URLs to influencer's apartment shots
  
  posts           Post[]
  memories        Memory[]
  lifecycleStartedAt DateTime? // Null = never started, set on first start
  createdAt       DateTime @default(now())
}

model Post {
  id           String     @id @default(uuid())
  influencerId String
  influencer   Influencer @relation(fields: [influencerId], references: [id])
  type         String     // "IMAGE" or "VIDEO"
  contentUrl   String
  caption      String
  postedAt     DateTime   @default(now())
}

model Memory {
  id           String     @id @default(uuid())
  influencerId String
  influencer   Influencer @relation(fields: [influencerId], references: [id])
  description  String     // Short-term memory of recent events
  importance   Int        @default(1)
  createdAt    DateTime   @default(now())
}

// Global avatar library for reuse across influencers
model AvatarLibrary {
  id          String   @id @default(uuid())
  url         String   // URL to the stored avatar image
  
  // Appearance traits for filtering
  hairColor   String?
  hairStyle   String?
  eyeColor    String?
  skinTone    String?
  lipStyle    String?
  features    String[]
  bodyHeight  String?
  bodyType    String?
  
  // Usage tracking
  usedBy      String[] // IDs of influencers using this avatar
  createdAt   DateTime @default(now())
}

